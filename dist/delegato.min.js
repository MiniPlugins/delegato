/*! Delegato - v0.2.0 - 2015-01-23
* https://github.com/MiniPlugins/delegato
* Copyright (c) 2015 Berto Yáñez, Óscar Otero; Licensed MIT */

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(){!function(a,b,c,d){function e(b,c){this.element=b,this.settings=a.extend({},g,c),this.pattern=/\(([^\)]+)\)([^:|]+):?([^|]+)?/,this.actions={},this.init()}var f="delegato",g={includeJquery:!1};e.prototype={init:function(){var b=this.actions,c=this.pattern,d=this.settings.includeJquery;a(this.element).on("click","[data-action]",function(e){var f=a(this),g=f.data("action"),h=function(b){var c;try{c=a(b)}catch(d){return!1}return c};g.split("|").forEach(function(e){var f=e.match(c);if(f){var g=f[1],i=f[2],j=f[3]?f[3].split(","):[];if(!h(g))throw new Error("Invalid selector");if(a.isFunction(b[i]))b[i].apply(a(g),j);else{if(!d||!a.isFunction(a(g)[i]))throw new Error("Malformed action");a(g)[i].apply(a(g),j)}}}),e.preventDefault()})},register:function(a,b){this.actions[a]=b},unregister:function(a){this.actions[a]&&delete this.actions[a]}},a.fn[f]=function(b){if(b===d||"object"==typeof b)return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))});if("string"==typeof b&&"_"!==b[0]&&"init"!==b){var c,g=arguments;return this.each(function(){var d=a.data(this,"plugin_"+f);d instanceof e&&"function"==typeof d[b]&&(c=d[b].apply(d,Array.prototype.slice.call(g,1))),"destroy"===b&&a.data(this,"plugin_"+f,null)}),c!==d?c:this}}}(jQuery,window,document)});