/*! Delegato - v1.0.0 - 2015-02-04
* https://github.com/MiniPlugins/delegato
* Copyright (c) 2015 Berto Yáñez, Óscar Otero; Licensed MIT */

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(){!function(a,b,c,d){function e(b,c){this.element=b,this.settings=a.extend({},g,c),this.pattern=/(?:\(([^\)]+)\))?([^:|]+):?([^|]+)?/,this.actions={},this.init()}var f="delegato",g={includeJquery:!1};e.prototype={init:function(){var b=this.actions,c=this.pattern,d=this.settings.includeJquery,e=function(b){var c;try{c=a(b)}catch(d){return!1}return c},f=function(a,b){var c=b.match(/^([^@]+)(?:@(.*))?$/),d=c[1],f=c[2];if(!d)throw new Error("Invalid selector");var g;switch(d){case"this":g=a;break;case"parent":g=a.parent();break;case"next":g=a.next();break;case"prev":g=a.prev();break;case"parent-next":g=a.parent().next();break;case"parent-prev":g=a.parent().prev();break;default:g=e(d)}if(!g)throw new Error("Invalid selector");return f?g.find(f):g};a(this.element).on("click","[data-action]",function(e){var g=a(this),h=g.data("action"),i=g.data("target")||g.attr("href");h.split("|").forEach(function(h){var j=h.match(c);if(j){var k=j[1]?j[1]:i,l=j[2],m=j[3]?j[3].split(","):[],n=f(g,k);if(a.isFunction(b[l]))m.unshift(e),b[l].apply(n,m);else{if(!d||!a.isFunction(n[l]))throw new Error("Malformed action");n[l].apply(n,m)}}}),e.stopPropagation(),e.preventDefault()})},register:function(a,b){this.actions[a]=b},unregister:function(a){this.actions[a]&&delete this.actions[a]}},a.fn[f]=function(b){if(b===d||"object"==typeof b)return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))});if("string"==typeof b&&"_"!==b[0]&&"init"!==b){var c,g=arguments;return this.each(function(){var d=a.data(this,"plugin_"+f);d instanceof e&&"function"==typeof d[b]&&(c=d[b].apply(d,Array.prototype.slice.call(g,1))),"destroy"===b&&a.data(this,"plugin_"+f,null)}),c!==d?c:this}}}(jQuery,window,document)});